/*!
 * angularjs-color-picker v1.1.2
 * https://github.com/ruhley/angular-color-picker/
 *
 * Copyright 2016 ruhley
 *
 * 2016-05-18 10:16:06
 *
 */
"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="color.picker"),function(){"use strict";angular.module("color.picker",[])}(),function(){"use strict";var a=function(a,b){return{restrict:"E",require:["^ngModel"],scope:{ngModel:"=",colorPickerDisabled:"=",colorPickerAlpha:"=",colorPickerCase:"=",colorPickerFormat:"=",colorPickerPos:"=",colorPickerSwatch:"=",colorPickerSwatchOnly:"=",colorPickerSwatchPos:"=",colorPickerSwatchBootstrap:"=",colorPickerInline:"=",colorPickerOnChange:"&"},templateUrl:"template/color-picker/directive.html",link:function(c,d,e,f){c.onChangeValue=null,c.updateModel=!0,c.init=function(){
// if no color provided
if(void 0===c.ngModel)c.setDefaults();else{var b=tinycolor(c.ngModel);if(b.isValid()){var d=b.toHsv();c.hue=d.h,c.saturation=100*d.s,c.lightness=100*d.v,c.opacity=100*d.a}}
// set default config settings
c.initConfig(),
// setup mouse events
a.on("mousedown",c.onMouseDown),a.on("mouseup",c.onMouseUp),a.on("mousemove",c.onMouseMove),c.find(".color-picker-grid").on("click",c.onColorClick),c.find(".color-picker-hue").on("click",c.onHueClick),c.find(".color-picker-opacity").on("click",c.onOpacityClick)},c.onMouseDown=function(a){
// an element in this picker
!c.config.disabled&&c.find(a.target).length>0&&(
// mouse event on color grid
a.target.classList.contains("color-picker-grid-inner")||a.target.classList.contains("color-picker-picker")||a.target.parentNode.classList.contains("color-picker-picker")?(c.colorDown(a),c.$apply()):a.target.classList.contains("color-picker-hue")||a.target.parentNode.classList.contains("color-picker-hue")?(c.hueDown(a),c.$apply()):(a.target.classList.contains("color-picker-opacity")||a.target.parentNode.classList.contains("color-picker-opacity"))&&(c.opacityDown(a),c.$apply()))},c.onMouseUp=function(a){
// no current mouse events and not an element in the picker
c.colorMouse||c.hueMouse||c.opacityMouse||0!==c.find(a.target).length?c.colorMouse?(c.colorUp(a),c.$apply(),c.onChange(a)):c.hueMouse?(c.hueUp(a),c.$apply(),c.onChange(a)):c.opacityMouse&&(c.opacityUp(a),c.$apply(),c.onChange(a)):(c.log("Color Picker: Document Click Event"),c.hide())},c.onMouseMove=function(a){
// mouse event on color grid
c.colorMouse?(c.colorChange(a),c.$apply()):c.hueMouse?(c.hueChange(a),c.$apply()):c.opacityMouse&&(c.opacityChange(a),c.$apply())},c.onColorClick=function(a){c.config.disabled||(c.colorChange(a),c.$apply(),c.onChange(a))},c.onHueClick=function(a){c.config.disabled||(c.hueChange(a),c.$apply(),c.onChange(a))},c.onOpacityClick=function(a){c.config.disabled||(c.opacityChange(a),c.$apply(),c.onChange(a))},c.onChange=function(a){c.ngModel!==c.onChangeValue&&(c.onChangeValue=c.ngModel,c.colorPickerOnChange({$event:a,color:c.ngModel}))},c.onBlur=function(){c.ngModel!==c.onChangeValue&&(c.updateModel=!0,c.update())},c.initConfig=function(){c.config={},c.config.disabled=void 0===c.colorPickerDisabled?!1:c.colorPickerDisabled,c.config.alpha=void 0===c.colorPickerAlpha?!0:c.colorPickerAlpha,c.config.case=void 0===c.colorPickerCase?"upper":c.colorPickerCase,c.config.format=void 0===c.colorPickerFormat?"hsl":c.colorPickerFormat,c.config.pos=void 0===c.colorPickerPos?"bottom left":c.colorPickerPos,c.config.swatch=void 0===c.colorPickerSwatch?!0:c.colorPickerSwatch,c.config.swatchOnly=void 0===c.colorPickerSwatchOnly?!1:c.colorPickerSwatchOnly,c.config.swatchPos=void 0===c.colorPickerSwatchPos?"left":c.colorPickerSwatchPos,c.config.swatchBootstrap=void 0===c.colorPickerSwatchBootstrap?!0:c.colorPickerSwatchBootstrap,c.config.inline=void 0===c.colorPickerInline?!1:c.colorPickerInline,c.visible=c.config.inline,c.log("Color Picker: Config",c.config)},c.focus=function(){c.log("Color Picker: Focus Event"),c.find(".color-picker-input")[0].focus()},c.show=function(){
// if already visible then don't run show again
// if already visible then don't run show again
// force the grid selection circle to redraw and fix its position
return c.visible?!0:(c.log("Color Picker: Show Event"),c.visible=!0,c.hueMouse=!1,c.opacityMouse=!1,c.colorMouse=!1,c.saturationUpdate(),void c.lightnessUpdate())},c.hide=function(){c.config.inline||!c.visible&&null===d[0].querySelector(".color-picker-panel").offsetParent||(c.log("Color Picker: Hide Event"),c.visible=!1,c.$apply())},c.setDefaults=function(){void 0===c.hue&&(c.hue=0),void 0===c.saturation&&(c.saturation=0),void 0===c.lightness&&(c.lightness=100),void 0===c.opacity&&(c.opacity=100)},c.update=function(){if(void 0===c.hue&&void 0===c.saturation&&void 0===c.lightness)return!1;c.setDefaults();var a,b=tinycolor({h:c.hue,s:c.saturation/100,v:c.lightness/100});switch(c.config.alpha&&b.setAlpha(c.opacity/100),c.log("Color Picker: COLOR CHANGED TO ",b,c.hue,c.saturation,c.lightness,c.opacity),c.swatchColor=b.toHslString(),c.config.format){case"rgb":a=b.toRgbString();break;case"hex":a=b.toHexString(),a="lower"===c.config.case?a.toLowerCase():a.toUpperCase();break;case"hex8":a=b.toHex8String(),a="lower"===c.config.case?a.toLowerCase():a.toUpperCase();break;case"hsv":a=b.toHsvString();break;default:a=b.toHslString()}c.updateModel&&(c.ngModel=a)},c.updateSwatchBackground=function(){var a=angular.element(d[0].querySelector(".color-picker-swatch"));a.css({"background-color":c.swatchColor})},c.$watch("ngModel",function(a,d){if(void 0!==a&&null!==a&&a!==d&&a.length>4){c.log("Color Picker: MODEL - CHANGED",a);var g=tinycolor(a);if(g.isValid()){var h=g.toHsv();c.updateModel=!1,c.hue=h.h,c.saturation=100*h.s,c.lightness=100*h.v,c.config.alpha&&(c.opacity=100*h.a),b(function(){c.updateModel=!0}),c.isValid=!0}else c.isValid=!1;f[0].$setValidity(e.name,c.isValid),void 0!==d&&"function"==typeof f[0].$setDirty&&f[0].$setDirty()}else null!==a&&""!==a||(c.hue=void 0,c.saturation=void 0,c.lightness=void 0,c.opacity=void 0),c.swatchColor=""}),c.$watchGroup(["colorPickerFormat","colorPickerAlpha","colorPickerCase"],function(a,b){void 0!==a&&(c.initConfig(),c.update())}),c.$watchGroup(["colorPickerDisabled","colorPickerSwatchBootstrap","colorPickerSwatchOnly","colorPickerSwatch","colorPickerPos","colorPickerInline"],function(a,b){void 0!==a&&c.initConfig()}),c.$watch("colorPickerSwatchPos",function(a,d){void 0!==a&&(c.initConfig(),b(function(){c.updateSwatchBackground()}))}),
//---------------------------
// Update Positions And Colors On Elements
//---------------------------
c.$watch("swatchColor",function(){c.updateSwatchBackground()}),c.$watch("huePos",function(a){var b=d[0].querySelector(".color-picker-hue"),c=angular.element(d[0].querySelector(".color-picker-hue .color-picker-slider")),e=b.getBoundingClientRect();c.css({top:e.height*a/100+"px"})}),c.$watch("opacityPos",function(a){var b=d[0].querySelector(".color-picker-opacity"),c=angular.element(d[0].querySelector(".color-picker-opacity .color-picker-slider")),e=b.getBoundingClientRect();c.css({top:e.height*a/100+"px"})}),c.$watch("lightnessPos",function(a){var b=d[0].querySelector(".color-picker-grid"),c=angular.element(d[0].querySelector(".color-picker-grid .color-picker-picker")),e=b.getBoundingClientRect();c.css({top:e.height*a/100+"px"})}),c.$watch("saturationPos",function(a){var b=d[0].querySelector(".color-picker-grid"),c=angular.element(d[0].querySelector(".color-picker-grid .color-picker-picker")),e=b.getBoundingClientRect();c.css({left:e.width*a/100+"px"})}),c.$watch("grid",function(a){var b=angular.element(d[0].querySelector(".color-picker-grid"));b.css({"background-color":a})}),
//---------------------------
// HUE
//---------------------------
c.hueDown=function(a){a.stopPropagation(),a.preventDefault(),c.log("Color Picker: HUE - MOUSE DOWN"),c.hueMouse=!0},c.hueUp=function(a){a.stopPropagation(),a.preventDefault(),c.log("Color Picker: HUE - MOUSE UP"),c.hueMouse=!1},c.hueChange=function(a){a.stopPropagation(),a.preventDefault(),c.log("Color Picker: HUE - MOUSE CHANGE");var b=c.find(".color-picker-hue");c.hue=360*(1-(a.pageY-c.offset(b).top)/b.prop("offsetHeight")),c.hue>360?c.hue=360:c.hue<0&&(c.hue=0)},c.hueUpdate=function(){void 0!==c.hue&&(c.log("Color Picker: HUE - CHANGED"),c.huePos=100*(1-c.hue/360),c.grid=tinycolor({h:c.hue,s:100,v:1}).toHslString(),c.huePos<0?c.huePos=0:c.huePos>100&&(c.huePos=100),c.update())},c.$watch("hue",function(a,b){c.hueUpdate()}),
//---------------------------
// OPACITY
//---------------------------
c.opacityDown=function(a){a.stopPropagation(),a.preventDefault(),c.log("Color Picker: OPACITY - MOUSE DOWN"),c.opacityMouse=!0},c.opacityUp=function(a){a.stopPropagation(),a.preventDefault(),c.log("Color Picker: OPACITY - MOUSE UP"),c.opacityMouse=!1},c.opacityChange=function(a){a.stopPropagation(),a.preventDefault(),c.log("Color Picker: OPACITY - MOUSE CHANGE");var b=c.find(".color-picker-opacity");c.opacity=100*(1-(a.pageY-c.offset(b).top)/b.prop("offsetHeight")),c.opacity>100?c.opacity=100:c.opacity<0&&(c.opacity=0)},c.opacityUpdate=function(){void 0!==c.opacity&&(c.log("Color Picker: OPACITY - CHANGED"),c.opacityPos=100*(1-c.opacity/100),c.opacityPos<0?c.opacityPos=0:c.opacityPos>100&&(c.opacityPos=100),c.update())},c.$watch("opacity",function(a,b){c.opacityUpdate()}),
//---------------------------
// COLOR
//---------------------------
c.colorDown=function(a){a.stopPropagation(),a.preventDefault(),c.log("Color Picker: COLOR - MOUSE DOWN"),c.colorMouse=!0},c.colorUp=function(a){a.stopPropagation(),a.preventDefault(),c.log("Color Picker: COLOR - MOUSE UP"),c.colorMouse=!1},c.colorChange=function(a){a.stopPropagation(),a.preventDefault(),c.log("Color Picker: COLOR - MOUSE CHANGE");var b=c.find(".color-picker-grid-inner"),d=c.offset(b);c.saturation=(a.pageX-d.left)/b.prop("offsetWidth")*100,c.lightness=100*(1-(a.pageY-d.top)/b.prop("offsetHeight")),c.saturation>100?c.saturation=100:c.saturation<0&&(c.saturation=0),c.lightness>100?c.lightness=100:c.lightness<0&&(c.lightness=0)},c.saturationUpdate=function(a){void 0!==c.saturation&&c.saturation!==a&&(c.log("Color Picker: SATURATION - CHANGED"),c.saturationPos=c.saturation/100*100,c.saturationPos<0?c.saturationPos=0:c.saturationPos>100&&(c.saturationPos=100),c.update())},c.$watch("saturation",function(a,b){c.saturationUpdate(b)}),c.lightnessUpdate=function(a){void 0!==c.lightness&&c.lightness!==a&&(c.log("Color Picker: LIGHTNESS - CHANGED"),c.lightnessPos=100*(1-c.lightness/100),c.lightnessPos<0?c.lightnessPos=0:c.lightnessPos>100&&(c.lightnessPos=100),c.update())},c.$watch("lightness",function(a,b){c.lightnessUpdate(b)}),
//---------------------------
// HELPER FUNCTIONS
//---------------------------
c.log=function(){},
// taken and modified from jQuery's find
c.find=function(a){var b,e=c.wrapper?c.wrapper[0]:d[0],f=[];
// Same basic safeguard as Sizzle
if(!a)return f;if("string"==typeof a){
// Early return if context is not an element or document
if(1!==(b=e.nodeType)&&9!==b)return[];f=e.querySelectorAll(a)}else e.contains(a)&&f.push(a);return angular.element(f)},
// taken and modified from jQuery's offset
c.offset=function(a){var b,c,d,e,f=a[0];if(f)
// Support: IE<=11+
// Running getBoundingClientRect on a
// disconnected node in IE throws an error
// Support: IE<=11+
// Running getBoundingClientRect on a
// disconnected node in IE throws an error
// Make sure element is not hidden (display: none)
// hack for small chrome screens not position the clicks properly when the page is scrolled
return f.getClientRects().length?(d=f.getBoundingClientRect(),d.width||d.height?(e=f.ownerDocument,c=null!==e&&e===e.window?e:9===e.nodeType&&e.defaultView,b=e.documentElement,window.chrome&&screen.width<=768?{top:d.top-b.clientTop,left:d.left-b.clientLeft}:{top:d.top+c.pageYOffset-b.clientTop,left:d.left+c.pageXOffset-b.clientLeft}):d):{top:0,left:0}},c.init(),c.$on("$destroy",function(){a.off("mousedown",c.onMouseDown),a.off("mouseup",c.onMouseUp),a.off("mousemove",c.onMouseMove)})}}};a.$inject=["$document","$timeout"],angular.module("color.picker").directive("colorPicker",a)}(),angular.module("color.picker").run(["$templateCache",function(a){a.put("template/color-picker/directive.html",'<div class="color-picker-wrapper" ng-class="{\'color-picker-swatch-only\': config.swatchOnly}">\n   <div class="color-picker-input-wrapper" ng-class="{\'input-group\': config.swatchBootstrap && config.swatch}">\n       <span ng-if="config.swatchPos === \'left\'" class="color-picker-swatch" ng-click="focus()" ng-show="config.swatch" ng-class="{\'color-picker-swatch-left\': config.swatchPos !== \'right\', \'color-picker-swatch-right\': config.swatchPos === \'right\', \'input-group-addon\': config.swatchBootstrap}"></span>\n       <input class="color-picker-input form-control" type="text" ng-model="ngModel" ng-readonly="config.swatchOnly" ng-disabled="config.disabled" ng-blur="onBlur()" ng-change="onChange($event)" size="7" ng-focus="show()" ng-class="{\'color-picker-input-swatch\': config.swatch && !config.swatchOnly && config.swatchPos === \'left\'}">\n       <span ng-if="config.swatchPos === \'right\'" class="color-picker-swatch" ng-click="focus()" ng-show="config.swatch" ng-class="{\'color-picker-swatch-left\': config.swatchPos !== \'right\', \'color-picker-swatch-right\': config.swatchPos === \'right\', \'input-group-addon\': config.swatchBootstrap}"></span>\n   </div>\n   <div class="color-picker-panel" ng-show="visible" ng-class="{\n'+"       'color-picker-panel-top color-picker-panel-right': config.pos === 'top right',\n       'color-picker-panel-top color-picker-panel-left': config.pos === 'top left',\n       'color-picker-panel-bottom color-picker-panel-right': config.pos === 'bottom right',\n       'color-picker-panel-bottom color-picker-panel-left': config.pos === 'bottom left',\n       'color-picker-show-alpha': config.alpha && config.format !== 'hex',\n       'color-picker-show-inline': config.inline,\n   }\">\n       <div class=\"color-picker-row\">\n           <div class=\"color-picker-grid color-picker-sprite\">\n               <div class=\"color-picker-grid-inner\"></div>\n               <div class=\"color-picker-picker\">\n                   <div></div>\n               </div>\n           </div>\n           <div class=\"color-picker-hue color-picker-sprite\">\n               <div class=\"color-picker-slider\"></div>\n           </div>\n           <div class=\"color-picker-opacity color-picker-sprite\" ng-show=\"config.alpha && config.format !== 'hex'\">\n               <div class=\"color-picker-slider\"></div>\n           </div>\n       </div>\n   </div>\n</div>")}]);